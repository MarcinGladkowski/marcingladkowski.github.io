{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/symfony-fast-track/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Think Big","siteUrl":"https://marcingladkowski.pl"}},"markdownRemark":{"id":"3f80a8cd-c590-5625-894b-a44fc497dd4f","excerpt":"Continuing learn the Symfony framework I’m always looking for new possibilities and ideas. Learning the Symfony framework we have, as in other\ntools a few ideas…","html":"<p>Continuing learn the Symfony framework I’m always looking for new possibilities and ideas. Learning the Symfony framework we have, as in other\ntools a few ideas how to get main features/good practices. We can read great <a href=\"https://symfony.com/doc/current/index.html\">documentation</a>, register in <a href=\"https://symfonycasts.com/\">SymfonyCasts</a>,\ndo own project, watch a lot of videos from Symfony conferences, and of course attend in these conferences but we have also another way to get some knowledge and get main features.</p>\n<p>It’s <a href=\"https://symfony.com/book\">Symfony Fast Track book</a></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 301px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac0d200d679052e99876dacfd6075e55/fb933/symfony_fast_track.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 150.63291139240508%; position: relative; bottom: 0; left: 0; background-image: url('data:image/webp;base64,UklGRuwAAABXRUJQVlA4IOAAAABQBQCdASoUAB4APsVQoUunpKMhsAwA8BiJZgCdAYyU3FHBzJ+vpAkKcw6aRbOha9/I/oAA/u0QOJXcvi0PW/QeuUPlzEmb7z0wPQWjcNbMGoY8rE2Zrll9KH6K+nFqrHUpS7AxaDcZkHjo0Morf74TOvdJ+hhZeEVDvwngKFDCT2QHHpJeDFXr1I7Rl+cS4W67C6u9jRaHZ2QjeIj2DLmPsym8nEELzsdLSxJEBmhqv3dpTcrekebjpQRHL8kfaOjNOVcJkUgEKL5Qt0kGyx6r5xZnpWK1UyaKuB9wxXUAAA=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"symfony_fast_track_book\"\n        title=\"symfony_fast_track_book\"\n        src=\"/static/ac0d200d679052e99876dacfd6075e55/fb933/symfony_fast_track.png\"\n        srcset=\"/static/ac0d200d679052e99876dacfd6075e55/c26ae/symfony_fast_track.png 158w,\n/static/ac0d200d679052e99876dacfd6075e55/fb933/symfony_fast_track.png 301w\"\n        sizes=\"(max-width: 301px) 100vw, 301px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>I decided to go through everything step by step. What I learned/reminded?</p>\n<h3>Xdebug extra option</h3>\n<p>By adding <code class=\"language-text\">xdebug.file_link_format</code> option you can specify your IDE, and when Symfony displays error stack trace you can go to file and line straight away.</p>\n<h3>Recipes additional behavioral</h3>\n<p>Marks like for ex: <code class=\"language-text\">###&lt; doctrine/doctrine-bundle ###</code> were added by the recipes/packages. Then is easy to remove also when package will be removed.</p>\n<p>The recipes also adding <code class=\"language-text\">docker-compose</code> configuration for new containers when we need a database.</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token comment\">###> symfony/mailer ###</span>\n  <span class=\"token key atrule\">mailer</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> schickling/mailcatcher\n    <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token number\">1025</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1080</span><span class=\"token punctuation\">]</span>\n<span class=\"token comment\">###&lt; symfony/mailer ###</span></code></pre></div>\n<h3>Packages are upgrading</h3>\n<p>In a lot of projects I’m using older packages. Now I realized the some common packages have some major upgrades. Sometime is good to start new project to know the newest changes. It can be frustrating sometimes.</p>\n<p>Execute migrations with newer version on command <code class=\"language-text\">php bin/console doctrine:migrations:execute 'DoctrineMigrations\\Version20220418170145' --up</code></p>\n<p>Previously was (version 2):\n<code class=\"language-text\">php bin/console doctrine:migrations:execute 20220418170145 --up</code></p>\n<h3>Dependency Injection Container</h3>\n<p>Entities are Data Object and its not be right to inject them as services</p>\n<p>Previously auto generated event subscriber was instantiated by framework because of the interface which class implements. Interface tells the framework how to create the service.</p>\n<p><a href=\"https://github.com/andreia/symfony-cheat-sheets/blob/master/Symfony4/services_en_42.pdf\">Symfony Services Cheat Sheet</a></p>\n<h3>Testing</h3>\n<p>Writing <strong>dataProviders</strong> functions You haven’t returned a simple array. It’s an iterable type hint. It’s mean you can simply write a more readable generator using the yield keyword instead of associative arrays. For ex.</p>\n<div class=\"gatsby-highlight\" data-language=\"php\"><pre class=\"language-php\"><code class=\"language-php\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">function</span> <span class=\"token function-definition function\">someDataProvider</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token keyword return-type\">iterable</span><span class=\"token string backtick-quoted-string\">``</span>\n<span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// buid some data</span>\n  <span class=\"token keyword\">yield</span> <span class=\"token string single-quoted-string\">'key'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'data1'</span>\n\n  <span class=\"token keyword\">yield</span> <span class=\"token string single-quoted-string\">'key'</span> <span class=\"token operator\">=></span> <span class=\"token string single-quoted-string\">'data2'</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>In Symfony components like http you can find classes to mock it easily. For ex. <code class=\"language-text\">MockHttpClient</code></p>\n<p>Creating a separate DB for tests, for development just create new database on db container.\nCommand: <code class=\"language-text\">php bin/console doctrine:database:create --env=test</code> creates test database</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Created database <span class=\"token string\">\"app_test\"</span> <span class=\"token keyword\">for</span> connection named default</code></pre></div>\n<p>then you can execute migrations:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> php bin/console doctrine:migrations:migrate -n --env<span class=\"token operator\">=</span>test</code></pre></div>\n<h3>Caching</h3>\n<p>Method <code class=\"language-text\">setSharedMaxAge()</code> using for reverse proxy cache</p>\n<p>Method <code class=\"language-text\">setMaxAge()</code> is usable for browser cache\\</p>\n<p>Cache header x-symfony-cache: on statuses: <code class=\"language-text\">:miss, :fresh, :store</code></p>\n<p>Http method <code class=\"language-text\">PURGE</code>. This method doesn’t exists in RFC but is implemented caching tools like Varnish</p>\n<h3>Explore Symfony components</h3>\n<p>In this tutorial I had a chance to try the component <a href=\"https://symfony.com/doc/current/components/workflow.html\">Workflow</a>. It’s very\nhelpful to manage workflow or finite state machine. This example shows me there are a lot of Symfony Components which resolved the most common problems. Don’t reinvent the wheel and check if someone implement what you want to achieve.</p>\n<h3>Be lazy and use MakerBundle</h3>\n<p>Instead of writing classes/services by hand, it’s great do generate them. If the class is relatively easily there is no problem. What if you want to create\nspecialized event listener? It’s an elegant solution which really helps you.</p>\n<p>Component with interactive prompts show you all possibilities:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"> Choose a class name <span class=\"token keyword\">for</span> your event subscriber <span class=\"token punctuation\">(</span>e.g. ExceptionSubscriber<span class=\"token punctuation\">)</span>:\n <span class=\"token operator\">></span> ExampleSubscriber\n\n Suggested Events:\n * kernel.controller <span class=\"token punctuation\">(</span>Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpKernel<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>ControllerEvent<span class=\"token punctuation\">)</span>\n * kernel.controller_arguments <span class=\"token punctuation\">(</span>Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpKernel<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>ControllerArgumentsEvent<span class=\"token punctuation\">)</span>\n * kernel.exception <span class=\"token punctuation\">(</span>Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpKernel<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>ExceptionEvent<span class=\"token punctuation\">)</span>\n * kernel.finish_request <span class=\"token punctuation\">(</span>Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpKernel<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>FinishRequestEvent<span class=\"token punctuation\">)</span>\n * kernel.request <span class=\"token punctuation\">(</span>Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpKernel<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>RequestEvent<span class=\"token punctuation\">)</span>\n * kernel.response <span class=\"token punctuation\">(</span>Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpKernel<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>ResponseEvent<span class=\"token punctuation\">)</span>\n * kernel.terminate <span class=\"token punctuation\">(</span>Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpKernel<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>TerminateEvent<span class=\"token punctuation\">)</span>\n * kernel.view <span class=\"token punctuation\">(</span>Symfony<span class=\"token punctuation\">\\</span>Component<span class=\"token punctuation\">\\</span>HttpKernel<span class=\"token punctuation\">\\</span>Event<span class=\"token punctuation\">\\</span>ViewEvent<span class=\"token punctuation\">)</span>\n\n  What event <span class=\"token keyword\">do</span> you want to subscribe to?:\n</code></pre></div>\n<h3>Additional tools like ApiPlatform and EasyAdminBundle</h3>\n<p>Are you creating API or management panel, which is a common implementation ? Don’t write it from a scratch.\nCheck the most powerful packages like <a href=\"https://api-platform.com/\">API Platform</a> or <a href=\"https://github.com/EasyCorp/EasyAdminBundle\">EasyAdminBundle</a>.</p>\n<p>Regards\nMarcin</p>","frontmatter":{"title":"Symfony Fast Track","date":"May 21, 2022","description":null}},"previous":{"fields":{"slug":"/dw_gym/"},"frontmatter":{"title":"DW Gym - 3 day python challenge"}},"next":{"fields":{"slug":"/step-functions-workshop/"},"frontmatter":{"title":"The next step is... AWS Step Functions"}}},"pageContext":{"id":"3f80a8cd-c590-5625-894b-a44fc497dd4f","previousPostId":"cad7b8ec-88c8-59d6-b11d-02f98b2b2465","nextPostId":"7ab70255-d75d-534f-bd92-8d80696827d4"}},
    "staticQueryHashes": ["4135132960","805692932"]}